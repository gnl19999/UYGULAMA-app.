<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kelime UygulamasÄ± v5 (TÃ¼m Kelimeler ve Quiz Eklendi)</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700;900&display=swap" rel="stylesheet">
    <style>
        /* --- TEMEL AYARLAR --- */
        body {
            font-family: 'Roboto', sans-serif;
            background-color: #f4f6f8;
            margin: 0; padding: 0;
            display: flex; justify-content: center;
            min-height: 100vh;
        }
        .container {
            width: 100%;
            max-width: 450px;
            background-color: #fff; min-height: 100vh;
            position: relative; box-shadow: 0 0 20px rgba(0,0,0,0.05);
            overflow-x: hidden;
        }
        /* --- EKRAN GEÃ‡Ä°ÅžLERÄ° --- */
        .screen { display: none; padding: 20px; animation: fadeIn 0.3s; }
        .screen.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        
        /* --- ÃœNÄ°TE KARTLARI --- */
        .unit-card {
            background-color: white;
            border-radius: 12px; padding: 15px; margin-bottom: 15px;
            display: flex; align-items: center; box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            border: 1px solid #f0f0f0;
            cursor: pointer; transition: transform 0.2s;
        }
        .unit-card:hover { transform: translateY(-2px); }
        .circle {
            width: 50px; height: 50px; border-radius: 50%; display: flex;
            align-items: center; justify-content: center; color: white;
            font-weight: bold; font-size: 18px; margin-right: 15px; flex-shrink: 0;
        }
        /* Renkler */
        .bg-1 { background-color: #ff6b6b; } 
        .bg-2 { background-color: #4ecdc4; }
        .bg-3 { background-color: #1a535c; } 
        .bg-4 { background-color: #f7fff7; border: 1px solid #ccc; color:#333 !important; } 
        .bg-5 { background-color: #ffe66d; color:#333 !important; }

        .info h3 { margin: 0; font-size: 16px; color: #333; }
        .info p { margin: 3px 0 0 0; color: #95a5a6; font-size: 12px; }

        /* --- DETAY LÄ°STESÄ° --- */
        .detail-header { display: flex; align-items: center; margin-bottom: 20px; padding-bottom: 10px; border-bottom: 1px solid #eee; }
        .back-button { font-size: 24px; color: #333; cursor: pointer; margin-right: 15px; }
        .word-item {
            background-color: white;
            border-radius: 10px; padding: 10px 15px; margin-bottom: 10px; 
            display: flex; align-items: center; box-shadow: 0 1px 3px rgba(0,0,0,0.05);
            border: 1px solid #eee;
            cursor: pointer; transition: background 0.2s;
        }
        .word-item:active { background-color: #f5f5f5; }
        
        .word-thumbnail {
            width: 50px; height: 50px; 
            margin-right: 15px; border-radius: 8px; 
            background-color: #f0f2f5; 
            overflow: hidden; flex-shrink: 0;
        }
        .word-thumbnail img { width: 100%; height: 100%; object-fit: cover; }

        /* --- KELÄ°ME KARTI --- */
        #card-screen { padding: 0; height: 100vh; background-color: white; display: flex; flex-direction: column; }
        .card-top-bar { padding: 15px; display: flex; justify-content: flex-end; }
        .card-close-btn { font-size: 28px; color: #b0bec5; cursor: pointer; padding: 10px; }

        .card-content {
            padding: 0 20px 30px 20px;
            flex-grow: 1; display: flex;
            flex-direction: column; align-items: center;
        }

        .word-header { text-align: center; margin-bottom: 15px; width: 100%; }
        .main-word-row { display: flex; align-items: center; justify-content: center; gap: 10px; }
        .main-word { font-size: 38px; font-weight: 900; color: #2c3e50; margin: 0; letter-spacing: -1px; }
        .main-meaning { color: #7f8c8d; font-size: 20px; margin-top: 5px; font-weight: 400; }
        .speaker-icon { font-size: 24px; cursor: pointer; filter: grayscale(100%); transition: 0.2s; }
        .speaker-icon:hover { filter: grayscale(0%); }

        .card-image-container {
            width: 100%; height: 260px;
            margin: 10px 0 20px 0; border-radius: 16px; overflow: hidden;
            position: relative; background-color: #f0f0f0;
        }
        .card-image-container img { width: 100%; height: 100%; object-fit: cover; }
        .lightning-icon {
            position: absolute; right: 15px; bottom: 15px;
            color: #f1c40f; font-size: 24px; background: rgba(255,255,255,0.8);
            width: 40px; height: 40px; border-radius: 50%; display: flex;
            align-items: center; justify-content: center;
        }

        .example-box {
            width: 100%; background-color: #fafafa; border: 1px solid #eee;
            border-radius: 16px; padding: 20px; box-shadow: 0 4px 6px rgba(0,0,0,0.02);
            position: relative; margin-top: auto;
            margin-bottom: 40px; box-sizing: border-box;
        }
        .or-label {
            position: absolute; left: 20px; top: -12px; background: #fff; padding: 0 5px;
            color: #f39c12; font-weight: bold; font-size: 14px; border: 1px solid #eee;
            border-radius: 4px;
        }
        .highlight-word { color: #27ae60; font-weight: bold; background: #e8f5e9; padding: 0 2px; border-radius: 3px; }
        .divider { height: 1px; background-color: #eee; margin: 12px 0; }

        /* --- QUIZ STÄ°LLERÄ° --- */
        .fixed-quiz-btn-container {
            position: fixed; bottom: 0; left: 0; width: 100%;
            background: white; padding: 15px 20px;
            box-shadow: 0 -4px 10px rgba(0,0,0,0.05);
            display: flex; justify-content: center; z-index: 100;
            box-sizing: border-box;
            /* Konteyner iÃ§inde container geniÅŸliÄŸini aÅŸmamak iÃ§in */
            left: 50%; transform: translateX(-50%); max-width: 450px;
        }
        .start-quiz-btn {
            width: 100%;
            background-color: #8cc63f; /* GÃ¶rseldeki yeÅŸil tonu */
            color: white;
            border: none; padding: 15px; border-radius: 30px; /* Daha yuvarlak */
            font-size: 18px; font-weight: bold; cursor: pointer;
            transition: background 0.2s;
            box-shadow: 0 4px 10px rgba(140, 198, 63, 0.4);
        }
        .start-quiz-btn:active { transform: scale(0.98); }

        /* Quiz SorularÄ± */
        .quiz-header-text {
            display: flex; justify-content: space-between; align-items: center;
            font-weight: bold; color: #888; font-size: 14px; margin-top: 10px;
        }
        .quiz-progress {
            height: 6px; background: #eee; border-radius: 3px;
            margin: 10px 0 30px 0; overflow: hidden;
        }
        .quiz-progress-bar {
            height: 100%; background: #4ecdc4; width: 0%; transition: width 0.3s;
        }
        .quiz-word {
            text-align: center; font-size: 36px; font-weight: 900;
            color: #2c3e50; margin: 30px 0 50px 0;
        }
        .quiz-options { list-style: none; padding: 0; }
        .quiz-option {
            background: #fff; border: 1px solid #eee;
            padding: 18px; margin-bottom: 12px; border-radius: 50px; /* Tam yuvarlak buton */
            text-align: center; color: #555; font-size: 16px; font-weight: 500;
            cursor: pointer; position: relative; transition: all 0.2s;
            box-shadow: 0 2px 5px rgba(0,0,0,0.03);
        }
        
        /* DoÄŸru/YanlÄ±ÅŸ Renkleri */
        .quiz-option.correct {
            background-color: #8cc63f; border-color: #8cc63f; color: white;
        }
        .quiz-option.wrong {
            background-color: #ff6b6b; border-color: #ff6b6b; color: white;
        }

        /* SonuÃ§ EkranÄ± */
        .result-circle {
            width: 140px; height: 140px; border-radius: 50%;
            background: #4ecdc4; color: white;
            display: flex; flex-direction: column;
            align-items: center; justify-content: center;
            margin: 20px auto 30px auto;
            box-shadow: 0 10px 20px rgba(78, 205, 196, 0.3);
        }
        .result-score { font-size: 48px; font-weight: 900; }
        .result-label { font-size: 16px; opacity: 0.9; }

    </style>
</head>
<body>

    <div class="container">
        <div id="list-screen" class="screen active">
            <h2 style="padding-left:5px; color:#2c3e50;">Ãœniteler</h2>
            <div id="units-container"></div>
        </div>

        <div id="detail-screen" class="screen">
            <div class="detail-header">
                <span class="back-button" onclick="showListScreen()">&#8592;</span> 
                <h2 id="detail-unit-title" style="margin:0; font-size:18px; color:#333;"></h2>
            </div>
            <ul id="unit-word-list" style="list-style:none; padding:0;"></ul>
            <div id="empty-message" style="display:none; text-align:center; color:#999; margin-top:50px;">
                Bu Ã¼nite henÃ¼z boÅŸ.
            </div>
        </div>

        <div id="card-screen" class="screen">
            <div class="card-top-bar">
                <span class="card-close-btn" onclick="closeCardScreen()">&#10005;</span>
            </div>
            <div class="card-content">
                <div class="word-header">
                    <div class="main-word-row">
                        <span class="speaker-icon" id="card-speaker-icon">ðŸ”Š</span>
                        <h1 id="card-word" class="main-word">...</h1>
                    </div>
                    <p id="card-meaning" class="main-meaning">...</p>
                </div>

                <div class="card-image-container">
                    <img id="card-image" src="" alt="GÃ¶rsel">
                    <div class="lightning-icon">âš¡</div>
                </div>

                <div class="example-box">
                    <span class="or-label">Ã–rnek</span>
                    <div>
                        <p id="card-sentence-en" style="color:#455a64; margin:0 0 5px 0; font-size:16px; line-height:1.4;"></p>
                        <div class="divider"></div>
                        <p id="card-sentence-tr" style="color:#90a4ae; margin:0; font-size:14px;"></p>
                    </div>
                </div>
            </div>
        </div>

        <div id="quiz-screen" class="screen">
            <div class="card-top-bar">
                <span class="card-close-btn" onclick="closeQuiz()">&#10005;</span>
            </div>
            
            <div class="quiz-header-text">
                <span>SORU <span id="q-current">1</span>/<span id="q-total">0</span></span>
                <span>QUIZ</span>
            </div>
            
            <div class="quiz-progress">
                <div id="quiz-bar" class="quiz-progress-bar"></div>
            </div>
            
            <h1 id="quiz-word-display" class="quiz-word">...</h1>
            
            <ul id="quiz-options-list" class="quiz-options">
                </ul>
        </div>

        <div id="result-screen" class="screen" style="text-align:center; padding-top:20px;">
            <div class="result-circle">
                <span id="result-score-val" class="result-score">0</span>
                <span class="result-label">DoÄŸru</span>
            </div>
            <h2 style="color:#333; margin-bottom:10px;">Tebrikler!</h2>
            <p style="color:#777; margin-bottom:40px;">Ãœniteyi baÅŸarÄ±yla tamamladÄ±n.</p>
            
            <div style="padding:0 20px;">
                <button class="start-quiz-btn" onclick="closeQuiz()">Ãœniteye DÃ¶n</button>
                <br><br>
                <button onclick="restartQuiz()" style="background:none; border:none; color:#999; text-decoration:underline; cursor:pointer; font-size:14px;">Tekrar Ã‡Ã¶z</button>
            </div>
        </div>

    </div>

    <script>
        
        // ======================================================
        // 1. VERÄ° TANIMLAMA (Ãœnite 3 GÃ¶rselleri Eklendi)
        // ======================================================

        // --- GÃ–RSEL URL'leri ---

        const customImageUrlsUnit1 = [
            // Temel fiiller (5 adet)
            "https://png.pngtree.com/thumb_back/fh260/background/20241013/pngtree-backyard-garden-trees-terrace-with-wooden-fences-cartoon-image_16384701.jpg", // 1. hide
            "https://media.istockphoto.com/id/1277525745/tr/vekt%C3%B6r/otob%C3%BCsten-inen-insanlar-karikat%C3%BCr-ill%C3%BCstrasyon-beyaz-arka-plan-%C3%BCzerinde-izole-nesne-vekt%C3%B6r.jpg?s=612x612&w=0&k=20&c=Wl68TfH5BU4kudtZD-acxnKkcalMCOrDvzX0SNxc8KQ=", // 2. run
            "https://png.pngtree.com/png-clipart/20240528/original/pngtree-a-3d-vector-illustration-of-pizza-png-image_15192871.png", // 3. eat
            "https://png.pngtree.com/png-vector/20250119/ourmid/pngtree-boy-drinking-water-clipart-hd-png-image_15270285.png", // 4. drink
            "https://png.pngtree.com/thumb_back/fh260/background/20250903/pngtree-person-sleeping-in-bed-with-cityscape-background-image_16776254.jpg", // 5. sleep
            // Akademik fiiller - Ä°lk 12 (12 adet)
            "https://png.pngtree.com/png-vector/20250221/ourmid/pngtree-amazon-rainforest-conservation-protecting-tropical-biodiversity-png-image_15552028.png", // 6. Analyze
            "https://png.pngtree.com/png-vector/20250531/ourmid/pngtree-boy-using-phone-cartoon-illustration-png-image_16431770.png", // 7. Identify
            "https://png.pngtree.com/png-vector/20250904/ourlarge/pngtree-3d-business-analytics-and-reporting-icon-png-image_17363432.webp", // 8. Determine
            "https://png.pngtree.com/png-clipart/20240502/original/pngtree-trendy-ratio-analysis-png-image_14993144.png", // 9. Establish
            "https://png.pngtree.com/png-vector/20250708/ourmid/pngtree-physics-atom-3d-icon-png-image_16616949.webp", // 10. Investigate
            "https://png.pngtree.com/png-vector/20250122/ourmid/pngtree-d-colorful-bar-graph-with-a-rising-red-arrow-indicating-growth-png-image_15294751.png", // 11. Illustrate
            "https://png.pngtree.com/png-clipart/20231001/original/pngtree-3d-illustration-of-business-growth-report-png-image_13029745.png", // 12. Demonstrate
            "https://png.pngtree.com/png-clipart/20240312/original/pngtree-3d-business-meeting-png-image_14573009.png", // 13. Evaluate
            "https://media.istockphoto.com/id/1327040559/tr/vekt%C3%B6r/sending-and-receiving-payment-using-electronic-invoice-person-preparing-invoice-on-laptop.jpg?s=612x612&w=0&k=20&c=v2amgNVQGs8kWeNDRCUNwLaFupE9ek3UI5Ml-naJdcY=", // 14. Synthesize
            "https://png.pngtree.com/png-clipart/20240309/original/pngtree-3d-illustration-of-charts-and-graph-with-analysis-business-financial-data-png-image_14549648.png", // 15. Formulate
            "https://png.pngtree.com/png-vector/20190629/ourmid/pngtree-reports-icon-for-your-project-png-image_1522218.jpg", // 16. Define
            "https://png.pngtree.com/png-vector/20230823/ourmid/pngtree-people-talking-in-front-of-a-screen-vector-png-image_6912863.png", // 17. Compare
            // Akademik fiiller - Son 8 (8 adet)
            "https://png.pngtree.com/png-vector/20240406/ourmid/pngtree-economic-crisis-vector-icon-png-image_12269105.png", // 18. Contrast
            "https://png.pngtree.com/png-vector/20230728/ourmid/pngtree-claim-clipart-cartoon-guy-looking-through-a-magnifying-glass-vector-png-image_6809134.png", // 19. Argue
            "https://png.pngtree.com/png-vector/20240914/ourmid/pngtree-brain-bulb-cartoon-pictures-png-image_12910015.png", // 20. Support
            "https://png.pngtree.com/thumb_back/fh260/background/20240429/pngtree-d-render-culture-woman-dressed-in-robes-sculpture-marble-pink-green-image_15721877.jpg", // 21. Challenge
            "https://img.pikbest.com/wp/202346/tool-symbol-cartoon-style-3d-rendered-illustration-of-a-set-mathematical-symbols-on-background_9722866.jpg!bw700", // 22. Derive
            "https://img.freepik.com/premium-vektor/d-stock-crypto-investment-trading-analysis-banner-growing-candlestick-chart-window_684471-168.jpg?semt=ais_hybrid&w=740&q=80", // 23. Indicate
            "https://png.pngtree.com/png-clipart/20240502/original/pngtree-trendy-ratio-analysis-png-image_14993144.png", // 24. Suggest
            "https://png.pngtree.com/png-vector/20240122/ourmid/pngtree-d-minimal-trading-charts-stock-market-rising-stock-market-analysis-stock-png-image_11455231.png" // 25. Conclude
        ];

        const customImageUrlsUnit2 = [
            "https://e7.pngegg.com/pngimages/860/592/png-clipart-business-analytics-data-analysis-predictive-analytics-business-intelligence-business-people-business.png", // 1. Perceive
            "https://png.pngtree.com/png-clipart/20231206/original/pngtree-visible-social-media-icon-3d-render-illustration-white-background-png-image_13781410.png", // 2. Emerge
            "https://png.pngtree.com/thumb_back/fw800/background/20250710/pngtree-financial-data-analysis-with-magnifying-glass-image_17607850.webp", // 3. Hypothesize
            "https://png.pngtree.com/png-vector/20190119/ourmid/pngtree-analytics-on-screen-line-filled-icon-png-image_325333.jpg", // 4. Imply
            "https://img.freepik.com/ucretsiz-vektor/grafiklerle-is-performansi-analizi_53876-59915.jpg?semt=ais_se_enriched&w=740&q=80", // 5. Infer
            "https://png.pngtree.com/png-vector/20240615/ourmid/pngtree-analyzing-financial-data-png-image_12774900.png", // 6. Validate
            "https://png.pngtree.com/png-clipart/20231005/original/pngtree-vector-illustration-of-customers-completing-a-flat-survey-form-vector-png-image_12965943.png", // 7. Survey
            "https://www.epcredit.ng/wp-content/uploads/2024/01/p1-copyright.png", // 8. Justify
            "https://png.pngtree.com/png-vector/20250816/ourlarge/pngtree-3d-glossy-magnifying-glass-over-book-research-study-png-image_17002924.webp", // 9. Propose
            "https://png.pngtree.com/png-clipart/20240309/original/pngtree-d-illustration-of-charts-and-graph-with-analysis-business-financial-data-png-image_14549648.png", // 10. Correlate
            "https://img.freepik.com/ucretsiz-vektor/grafiklerle-is-performansi-analizi_53876-59915.jpg?semt=ais_se_enriched&w=740&q=80", // 11. Interpret (Yeniden kullanÄ±lÄ±yor)
            "https://png.pngtree.com/png-vector/20251001/ourmid/pngtree-ultra-hd-infographic-and-data-visualization-icons-set-charts-graphs-arrows-png-image_17650129.webp", // 12. Distinguish
            "https://e7.pngegg.com/pngimages/576/642/png-clipart-data-analysis-analytics-management-big-data-data-processing-business-template-text.png", // 13. Refer
            "https://img.pikbest.com/illustration/20251009/business-team-presentation-vector-with-charts-graphs-data-analysis-and-teamwork_11925317.jpg!w700wp", // 14. Contrast (Tekrar KullanÄ±m)
            "https://cbx-prod.b-cdn.net/COLOURBOX67668799.jpg?width=800&height=800&quality=70", // 15. Vary
            "https://img.freepik.com/premium-photo/curious-scientist-3d-cartoon-character-transparent-background-ai_894067-14624.jpg", // 16. Research
            "https://media.istockphoto.com/id/1049718624/tr/vekt%C3%B6r/k%C3%BCt%C3%BCphane-illlustration.jpg?s=170667a&w=0&k=20&c=OSM2nrhcx44bnvUB5ZhHMSg5Q429uuRk8WcTM4eGvQ=", // 17. Abstract
            "https://png.pngtree.com/png-vector/20250321/ourmid/pngtree-businessman-analyzing-stock-market-trends-on-multiple-monitors-png-image_15809875.png", // 18. Predict
            "https://png.pngtree.com/thumb_back/fw800/background/20250710/pngtree-financial-data-analysis-with-magnifying-glass-image_17607850.webp", // 19. Confirm (Yeniden kullanÄ±lÄ±yor)
            "https://png.pngtree.com/png-clipart/20250305/original/pngtree-cartoon-scientist-in-laboratory-with-flasks-png-image_20575712.png" // 20. Examine
        ];

        // Ãœnite 3 GÃ¶rsel URL'leri
        const customImageUrlsUnit3 = [
            "https://png.pngtree.com/png-vector/20240603/ourmid/pngtree-sleepy-yawning-boy-cartoon-png-image_12611488.png", // 1. Signify (Esneyen Ã§ocuk yorgunluk ifade eder)
            "https://png.pngtree.com/png-vector/20250209/ourmid/pngtree-safe-full-of-gold-bars-png-image_15429890.png", // 2. Account for (Kaybolan parayÄ± aÃ§Ä±klamak)
            "https://png.pngtree.com/png-vector/20241016/ourmid/pngtree-crushed-car-vector-broken-illustration-png-image_14090444.png", // 3. Assess (HasarÄ± deÄŸerlendirmek)
            "https://png.pngtree.com/png-vector/20230728/ourlarge/pngtree-banquet-clipart-isometric-vector-family-dinner-cartoon-png-image_6798634.png", // 4. Assume (YemeÄŸi bitirdiÄŸini varsaymak)
            "https://media.istockphoto.com/id/1153827146/tr/vekt%C3%B6r/k%C4%B1z-yatakta-a%C3%A7%C4%B1k-kitap-ile-geceleri-uyuyan.jpg?s=612x612&w=0&k=20&c=eKspsCo5Qb3x4e70oiNDacOgtc6Fremhqi2RKqSAPAk=", // 5. Deduce (Kitaplardan Ã§Ä±karÄ±m yapmak)
            "https://png.pngtree.com/png-vector/20240604/ourmid/pngtree-teapot-breakfast-flat-free-png-image_12620643.png", // 6. Illustrate (Ã–rneklemek, gÃ¶stermek)
            "https://media.istockphoto.com/id/1314418031/vector/file-transfer-concept-yellow-folder-with-document-on-computer-monitor-3d-vector-illustration.jpg?s=612x612&w=0&k=20&c=8H3HIg4h8pH9WYSj-89c6MEAWK8P_TfaNDBozlSKlx8=", // 7. Incorporate (Dosya/Veri dahil etmek)
            "https://media.istockphoto.com/id/162238979/tr/vekt%C3%B6r/open-window.jpg?s=612x612&w=0&k=20&c=qdjyHeID6qCKPkNlPe3ouwD8Hb6K7TOMb1vMTtG1Lbk=", // 8. Monitor (GÃ¶zlemlemek, pencereden izlemek)
            "https://png.pngtree.com/thumb_back/fh260/background/20220219/pngtree-stacked-flying-dollar-banknotes-rich-consumer-flowing-photo-image_15993028.jpg", // 9. Omit (Detay atlamak, hariÃ§ bÄ±rakmak)
            "https://png.pngtree.com/png-vector/20250506/ourmid/pngtree-opened-old-book-with-blank-pages-on-isolated-png-image_16203659.png", // 10. Persist (Okumaya/iÅŸe devam etmek)
            "https://png.pngtree.com/thumb_back/fh260/background/20230717/pngtree-sleek-memphis-inspired-interior-featuring-a-bold-deep-blue-wall-and-image_3895210.jpg", // 11. Precede (Ã–nce gelmek)
            "https://img.freepik.com/premium-vektor/egzersiz-yapan-insan-grubu_18591-46577.jpg?semt=ais_hybrid&w=740&q=80", // 12. Retain (Formu korumak/Bilgiyi muhafaza etmek)
            "https://png.pngtree.com/png-vector/20210810/ourmid/pngtree-mountain-climbing-concept-illustration-three-people-cooperate-to-climb-to-the-png-image_3789297.jpg", // 13. Specify (Hedefi belirlemek)
            "https://media.istockphoto.com/id/824045360/tr/vekt%C3%B6r/kom%C5%9Fular.jpg?s=612x612&w=0&k=20&c=543zvIyX7OOhch_6UQaO508sR2XaHOvH-okTglaiZ0M=", // 14. Substantiate (KomÅŸuluk iliÅŸkilerini kanÄ±tlamak)
            "https://media.istockphoto.com/id/1061070196/tr/foto%C4%9Fraf/benzin-istasyonu-beyaz-bir-arka-plan-%C3%BCzerinde-izole-3d-%C3%A7izim.jpg?s=170667a&w=0&k=20&c=kQ9yLJ_EwlZK6sNPYDaGilXqO4_eojE3CE2YE5cl0Gw=", // 15. Undergo (YakÄ±t alÄ±m sÃ¼recinden geÃ§mek)
            "https://media.istockphoto.com/id/1082295530/tr/vekt%C3%B6r/%C3%A7ocuk-kitapl%C4%B1%C4%9F%C4%B1nda.jpg?s=170667a&w=0&k=20&c=MHa0i8Dv7HthlUD6nYC3L300RSUAEFMJzz2-6eXFIcA=", // 16. Utilize (KitaplarÄ±/kaynaklarÄ± kullanmak)
            "https://media.istockphoto.com/id/1486891519/vector/sound-elements-with-explosion-effect-3d-vector-mobile-application-icon-with-notification.jpg?s=612x612&w=0&k=20&c=lu9tRyWR6_9hDpryAj-A68mHV7W0V46BiItrTSh8QDo=", // 17. Constitute (Temel ilkeleri oluÅŸturmak)
            "https://png.pngtree.com/png-clipart/20240625/original/pngtree-vintage-blue-car-3d-png-image_15408209.png", // 18. Execute (PlanÄ± uygulamak)
            "https://png.pngtree.com/png-clipart/20230914/original/pngtree-traffic-jam-vector-png-image_12146638.png", // 19. Integrate (TrafiÄŸe/Sisteme entegre olmak)
            "https://png.pngtree.com/png-vector/20240823/ourlarge/pngtree-an-old-vase-featuring-a-broken-piece-of-pottery-showcasing-its-png-image_13591223.png" // 20. Resolve (Ã‡atÄ±ÅŸmayÄ±/Problemi Ã§Ã¶zmek)
        ];


        // --- KELÄ°ME DATALARI (Toplam 65 kelime) ---

        const baseVerbs = [
            { en_verb: "Hide", tr_verb: "Saklamak", en_sentence: "I like to {Hide} small things in the drawer.", tr_sentence: "BahÃ§eye kÃ¼Ã§Ã¼k ÅŸeyler saklamayÄ± severim.", image_url: customImageUrlsUnit1[0] },
            { en_verb: "Run", tr_verb: "KoÅŸmak", en_sentence: "We should {Run} faster to catch the bus.", tr_sentence: "OtobÃ¼se yetiÅŸmek iÃ§in daha hÄ±zlÄ± koÅŸmalÄ±yÄ±z.", image_url: customImageUrlsUnit1[1] },
            { en_verb: "Eat", tr_verb: "Yemek yemek", en_sentence: "Do you want to {Eat} pizza for dinner?", tr_sentence: "AkÅŸam yemeÄŸinde pizza yemek ister misin?", image_url: customImageUrlsUnit1[2] },
            { en_verb: "Drink", tr_verb: "Ä°Ã§mek", en_sentence: "She needs to {Drink} water after exercising.", tr_sentence: "Egzersizden sonra su iÃ§mesi gerekiyor.", image_url: customImageUrlsUnit1[3] },
            { en_verb: "Sleep", tr_verb: "Uyumak", en_sentence: "I always {Sleep} late on weekends.", tr_sentence: "Hafta sonlarÄ± her zaman geÃ§ uyurum.", image_url: customImageUrlsUnit1[4] }
        ];

        const academicWordsUnit1 = [
             { en_verb: "Analyze", tr_verb: "Analiz Etmek", en_sentence: "The research aims to {Analyze} the data thoroughly.", tr_sentence: "AraÅŸtÄ±rma, veriyi kapsamlÄ± bir ÅŸekilde analiz etmeyi amaÃ§lar.", image_url: customImageUrlsUnit1[5] },
             { en_verb: "Identify", tr_verb: "TanÄ±mlamak", en_sentence: "We must {Identify} the root cause of the problem.", tr_sentence: "Sorunun temel nedenini tanÄ±mlamalÄ±yÄ±z.", image_url: customImageUrlsUnit1[6] },
             { en_verb: "Determine", tr_verb: "Belirlemek, Karar Vermek", en_sentence: "They need to {Determine} the best strategy.", tr_sentence: "En iyi stratejiyi belirlemeleri gerekiyor.", image_url: customImageUrlsUnit1[7] },
             { en_verb: "Establish", tr_verb: "Kurmak, OluÅŸturmak", en_sentence: "We must {Establish} clear guidelines for the project.", tr_sentence: "Proje iÃ§in net yÃ¶nergeler oluÅŸturmalÄ±yÄ±z.", image_url: customImageUrlsUnit1[8] },
             { en_verb: "Investigate", tr_verb: "AraÅŸtÄ±rmak, SoruÅŸturmak", en_sentence: "The police will {Investigate} the crime scene.", tr_sentence: "Polis, suÃ§ mahalini soruÅŸturacak.", image_url: customImageUrlsUnit1[9] },
             { en_verb: "Illustrate", tr_verb: "Ã–rneklemek, Resimlemek", en_sentence: "Can you {Illustrate} your point with an example?", tr_sentence: "Fikrinizi bir Ã¶rnekle resimleyebilir misiniz?", image_url: customImageUrlsUnit1[10] },
             { en_verb: "Demonstrate", tr_verb: "GÃ¶steriyle KanÄ±tlamak", en_sentence: "The scientist will {Demonstrate} the new theory.", tr_sentence: "Bilim insanÄ± yeni teoriyi kanÄ±tlayacak.", image_url: customImageUrlsUnit1[11] },
             { en_verb: "Evaluate", tr_verb: "DeÄŸer BiÃ§mek, DeÄŸerlendirmek", en_sentence: "The managers will {Evaluate} the performance.", tr_sentence: "YÃ¶neticiler performansÄ± deÄŸerlendirecek.", image_url: customImageUrlsUnit1[12] },
             { en_verb: "Synthesize", tr_verb: "Sentezlemek, BirleÅŸtirmek", en_sentence: "She was asked to {Synthesize} the findings.", tr_sentence: "Ondan bulgularÄ± sentezlemesi istendi.", image_url: customImageUrlsUnit1[13] },
             { en_verb: "Formulate", tr_verb: "FormÃ¼le Etmek, HazÄ±rlamak", en_sentence: "We need to {Formulate} a new plan immediately.", tr_sentence: "Hemen yeni bir plan hazÄ±rlamam gerekiyor.", image_url: customImageUrlsUnit1[14] },
             { en_verb: "Define", tr_verb: "TanÄ±mlamak", en_sentence: "You must {Define} the key terms clearly.", tr_sentence: "Anahtar terimleri net bir ÅŸekilde tanÄ±mlamalÄ±sÄ±nÄ±z.", image_url: customImageUrlsUnit1[15] },
             { en_verb: "Compare", tr_verb: "KarÅŸÄ±laÅŸtÄ±rmak", en_sentence: "Please {Compare} the two reports.", tr_sentence: "LÃ¼tfen iki raporu karÅŸÄ±laÅŸtÄ±rÄ±n.", image_url: customImageUrlsUnit1[16] },
             { en_verb: "Contrast", tr_verb: "ZÄ±tlÄ±ÄŸÄ±nÄ± GÃ¶stermek", en_sentence: "The study will {Contrast} the two methods.", tr_sentence: "Ã‡alÄ±ÅŸma, iki yÃ¶ntemin zÄ±tlÄ±ÄŸÄ±nÄ± gÃ¶sterecek.", image_url: customImageUrlsUnit1[17] },
             { en_verb: "Argue", tr_verb: "TartÄ±ÅŸmak, Ä°ddia Etmek", en_sentence: "He will {Argue} his case in front of the board.", tr_sentence: "YÃ¶netim kurulunun Ã¶nÃ¼nde davasÄ±nÄ± iddia edecek.", image_url: customImageUrlsUnit1[18] },
             { en_verb: "Support", tr_verb: "Desteklemek, KanÄ±tlamak", en_sentence: "You must {Support} your argument with facts.", tr_sentence: "ArgÃ¼manÄ±nÄ±zÄ± gerÃ§eklerle desteklemelisiniz.", image_url: customImageUrlsUnit1[19] },
             { en_verb: "Challenge", tr_verb: "Meydan Okumak, Ä°tiraz Etmek", en_sentence: "The team decided to {Challenge} the previous findings.", tr_sentence: "Ekip, Ã¶nceki bulgulara itiraz etmeye karar verdi.", image_url: customImageUrlsUnit1[20] },
             { en_verb: "Derive", tr_verb: "TÃ¼retmek, Elde Etmek", en_sentence: "She can {Derive} the formula from first principles.", tr_sentence: "FormÃ¼lÃ¼ ilkelerden tÃ¼retebilir.", image_url: customImageUrlsUnit1[21] },
             { en_verb: "Indicate", tr_verb: "GÃ¶stermek, Ä°ÅŸaret Etmek", en_sentence: "The results {Indicate} a positive trend.", tr_sentence: "SonuÃ§lar pozitif bir eÄŸilimi gÃ¶stermektedir.", image_url: customImageUrlsUnit1[22] },
             { en_verb: "Suggest", tr_verb: "Ã–ne SÃ¼rmek, Tavsiye Etmek", en_sentence: "I {Suggest} we take a different approach.", tr_sentence: "FarklÄ± bir yaklaÅŸÄ±m izlememizi Ã¶ne sÃ¼rÃ¼yorum.", image_url: customImageUrlsUnit1[23] },
             { en_verb: "Conclude", tr_verb: "SonuÃ§landÄ±rmak, Bitirmek", en_sentence: "The speaker will {Conclude} the presentation soon.", tr_sentence: "KonuÅŸmacÄ± sunumu yakÄ±nda sonuÃ§landÄ±racak.", image_url: customImageUrlsUnit1[24] }
        ];

        const unit2Words = [
             { en_verb: "Perceive", tr_verb: "AlgÄ±lamak", en_sentence: "How do you {Perceive} the situation?", tr_sentence: "Durumu nasÄ±l algÄ±lÄ±yorsun?", image_url: customImageUrlsUnit2[0] },
             { en_verb: "Emerge", tr_verb: "Ortaya Ã‡Ä±kmak", en_sentence: "New evidence {Emerge}d during the trial.", tr_sentence: "DuruÅŸma sÄ±rasÄ±nda yeni kanÄ±tlar ortaya Ã§Ä±ktÄ±.", image_url: customImageUrlsUnit2[1] },
             { en_verb: "Hypothesize", tr_verb: "VarsayÄ±mda Bulunmak", en_sentence: "Scientists {Hypothesize} about the universe.", tr_sentence: "Bilim insanlarÄ± evren hakkÄ±nda varsayÄ±mda bulunurlar.", image_url: customImageUrlsUnit2[2] },
             { en_verb: "Imply", tr_verb: "Kastetmek, Ä°ma Etmek", en_sentence: "His silence may {Imply} agreement.", tr_sentence: "SessizliÄŸi anlaÅŸmayÄ± ima edebilir.", image_url: customImageUrlsUnit2[3] },
             { en_verb: "Infer", tr_verb: "Ã‡Ä±karÄ±m Yapmak", en_sentence: "We can {Infer} his meaning from the context.", tr_sentence: "Onun anlamÄ±nÄ± baÄŸlamdan Ã§Ä±karÄ±m yapabiliriz.", image_url: customImageUrlsUnit2[4] },
             { en_verb: "Validate", tr_verb: "DoÄŸrulamak, Onaylamak", en_sentence: "The data {Validate}s the study's findings.", tr_sentence: "Veriler, Ã§alÄ±ÅŸmanÄ±n bulgularÄ±nÄ± doÄŸrular.", image_url: customImageUrlsUnit2[5] },
             { en_verb: "Survey", tr_verb: "Anket Yapmak, Ä°ncelemek", en_sentence: "They {Survey}ed 500 people for the research.", tr_sentence: "AraÅŸtÄ±rma iÃ§in 500 kiÅŸiye anket yaptÄ±lar.", image_url: customImageUrlsUnit2[6] },
             { en_verb: "Justify", tr_verb: "HaklÄ± Ã‡Ä±karmak", en_sentence: "Can you {Justify} your actions with facts?", tr_sentence: "Eylemlerinizi gerÃ§eklerle haklÄ± Ã§Ä±karabilir misiniz?", image_url: customImageUrlsUnit2[7] },
             { en_verb: "Propose", tr_verb: "Teklif Etmek, Ã–nermek", en_sentence: "I {Propose} a new solution for the budget.", tr_sentence: "BÃ¼tÃ§e iÃ§in yeni bir Ã§Ã¶zÃ¼m Ã¶neriyorum.", image_url: customImageUrlsUnit2[8] },
             { en_verb: "Correlate", tr_verb: "Ä°liÅŸkilendirmek", en_sentence: "Stress levels {Correlate} with work hours.", tr_sentence: "Stres seviyeleri Ã§alÄ±ÅŸma saatleriyle iliÅŸkilidir.", image_url: customImageUrlsUnit2[9] },
             { en_verb: "Interpret", tr_verb: "Yorumlamak", en_sentence: "It's difficult to {Interpret} this abstract painting.", tr_sentence: "Bu soyut resmi yorumlamak zordur.", image_url: customImageUrlsUnit2[10] },
             { en_verb: "Distinguish", tr_verb: "AyÄ±rt Etmek", en_sentence: "Can you {Distinguish} between the two types?", tr_sentence: "Ä°ki tÃ¼r arasÄ±ndaki farkÄ± ayÄ±rt edebilir misiniz?", image_url: customImageUrlsUnit2[11] },
             { en_verb: "Refer", tr_verb: "Bahsetmek, AtÄ±fta Bulunmak", en_sentence: "The professor {Refer}red to his previous book.", tr_sentence: "ProfesÃ¶r Ã¶nceki kitabÄ±na atÄ±fta bulundu.", image_url: customImageUrlsUnit2[12] },
             { en_verb: "Contrast", tr_verb: "KarÅŸÄ±tlÄ±k OluÅŸturmak", en_sentence: "The new building {Contrast}s sharply with the old city.", tr_sentence: "Yeni bina eski ÅŸehirle keskin bir karÅŸÄ±tlÄ±k oluÅŸturuyor.", image_url: customImageUrlsUnit2[13] },
             { en_verb: "Vary", tr_verb: "DeÄŸiÅŸmek, Ã‡eÅŸitlenmek", en_sentence: "The prices {Vary} greatly depending on the season.", tr_sentence: "Fiyatlar mevsime baÄŸlÄ± olarak bÃ¼yÃ¼k Ã¶lÃ§Ã¼de deÄŸiÅŸir.", image_url: customImageUrlsUnit2[14] },
             { en_verb: "Research", tr_verb: "AraÅŸtÄ±rma Yapmak", en_sentence: "She will {Research} the topic for her thesis.", tr_sentence: "Tezi iÃ§in konuyu araÅŸtÄ±racak.", image_url: customImageUrlsUnit2[15] },
             { en_verb: "Abstract", tr_verb: "Ã–zetlemek, Soyutlamak", en_sentence: "He must {Abstract} the main points of the chapter.", tr_sentence: "BÃ¶lÃ¼mÃ¼n ana noktalarÄ±nÄ± Ã¶zetlemeli.", image_url: customImageUrlsUnit2[16] },
             { en_verb: "Predict", tr_verb: "Tahmin Etmek", en_sentence: "Experts {Predict} future market growth.", tr_sentence: "Uzmanlar gelecekteki pazar bÃ¼yÃ¼mesini tahmin ediyor.", image_url: customImageUrlsUnit2[17] },
             { en_verb: "Confirm", tr_verb: "Onaylamak, DoÄŸrulamak", en_sentence: "Please {Confirm} your reservation details.", tr_sentence: "LÃ¼tfen rezervasyon ayrÄ±ntÄ±larÄ±nÄ±zÄ± onaylayÄ±n.", image_url: customImageUrlsUnit2[18] },
             { en_verb: "Examine", tr_verb: "Ä°ncelemek, Muayene Etmek", en_sentence: "The doctor will {Examine} the patient's condition.", tr_sentence: "Doktor hastanÄ±n durumunu muayene edecek.", image_url: customImageUrlsUnit2[19] }
        ];

        const unit3Words = [
            { en_verb: "Signify", tr_verb: "Ä°fade Etmek, AnlamÄ±na Gelmek", en_sentence: "His constant yawning might {Signify} that he is extremely tired.", tr_sentence: "SÃ¼rekli esnemesi, aÅŸÄ±rÄ± yorgun olduÄŸu anlamÄ±na gelebilir.", image_url: customImageUrlsUnit3[0] },
            { en_verb: "Account for", tr_verb: "AÃ§Ä±klamak", en_sentence: "Can you {Account for} the missing money?", tr_sentence: "KayÄ±p parayÄ± aÃ§Ä±klayabilir misin?", image_url: customImageUrlsUnit3[1] },
            { en_verb: "Assess", tr_verb: "DeÄŸerlendirmek", en_sentence: "We need to {Assess} the damage after the storm.", tr_sentence: "FÄ±rtÄ±nadan sonra hasarÄ± deÄŸerlendirmemiz gerekiyor.", image_url: customImageUrlsUnit3[2] },
            { en_verb: "Assume", tr_verb: "Varsaymak, Farz Etmek", en_sentence: "I {Assume} you have finished the work.", tr_sentence: "Ä°ÅŸi bitirdiÄŸinizi varsayÄ±yorum.", image_url: customImageUrlsUnit3[3] },
            { en_verb: "Deduce", tr_verb: "SonuÃ§ Ã‡Ä±karma", en_sentence: "We can {Deduce} the answer from the facts.", tr_sentence: "CevabÄ± gerÃ§eklerden sonuÃ§ Ã§Ä±karabiliriz.", image_url: customImageUrlsUnit3[4] },
            { en_verb: "Illustrate", tr_verb: "AÃ§Ä±klamak, Ã–rneklemek", en_sentence: "She used a chart to {Illustrate} her points.", tr_sentence: "Fikirlerini aÃ§Ä±klamak iÃ§in bir grafik kullandÄ±.", image_url: customImageUrlsUnit3[5] },
            { en_verb: "Incorporate", tr_verb: "Dahil Etmek, Katmak", en_sentence: "The report should {Incorporate} all new data.", tr_sentence: "Rapor tÃ¼m yeni verileri dahil etmeli.", image_url: customImageUrlsUnit3[6] },
            { en_verb: "Monitor", tr_verb: "Ä°zlemek, GÃ¶zlemlemek", en_sentence: "Please {Monitor} the system performance.", tr_sentence: "LÃ¼tfen sistem performansÄ±nÄ± izleyin.", image_url: customImageUrlsUnit3[7] },
            { en_verb: "Omit", tr_verb: "HariÃ§ BÄ±rakmak, Atlamak", en_sentence: "Do not {Omit} any details in your summary.", tr_sentence: "Ã–zetinizde hiÃ§bir detayÄ± atlamayÄ±n.", image_url: customImageUrlsUnit3[8] },
            { en_verb: "Persist", tr_verb: "Devam Etmek, Israr Etmek", en_sentence: "The rain will {Persist} for another hour.", tr_sentence: "YaÄŸmur bir saat daha devam edecek.", image_url: customImageUrlsUnit3[9] },
            { en_verb: "Precede", tr_verb: "Ã–nce Gelmek", en_sentence: "The introduction must {Precede} the main text.", tr_sentence: "GiriÅŸ, ana metinden Ã¶nce gelmelidir.", image_url: customImageUrlsUnit3[10] },
            { en_verb: "Retain", tr_verb: "Tutmak, Muhafaza Etmek", en_sentence: "Try to {Retain} the information from the lecture.", tr_sentence: "Dersteki bilgiyi muhafaza etmeye Ã§alÄ±ÅŸÄ±n.", image_url: customImageUrlsUnit3[11] },
            { en_verb: "Specify", tr_verb: "Belirtmek", en_sentence: "Please {Specify} the required quantity.", tr_sentence: "LÃ¼tfen gerekli miktarÄ± belirtin.", image_url: customImageUrlsUnit3[12] },
            { en_verb: "Substantiate", tr_verb: "KanÄ±tlamak, DoÄŸrulamak", en_sentence: "You must {Substantiate} your claims with evidence.", tr_sentence: "Ä°ddialarÄ±nÄ±zÄ± kanÄ±tlarla doÄŸrulamalÄ±sÄ±nÄ±z.", image_url: customImageUrlsUnit3[13] },
            { en_verb: "Undergo", tr_verb: "GeÃ§irmek, YaÅŸamak", en_sentence: "The device will {Undergo} rigorous testing.", tr_sentence: "Cihaz titiz testlerden geÃ§ecek.", image_url: customImageUrlsUnit3[14] },
            { en_verb: "Utilize", tr_verb: "Kullanmak, Yararlanmak", en_sentence: "We should {Utilize} the new software.", tr_sentence: "Yeni yazÄ±lÄ±mÄ± kullanmalÄ±yÄ±z.", image_url: customImageUrlsUnit3[15] },
            { en_verb: "Constitute", tr_verb: "OluÅŸturmak, TeÅŸkil Etmek", en_sentence: "These rules {Constitute} the core principles.", tr_sentence: "Bu kurallar temel ilkeleri oluÅŸturur.", image_url: customImageUrlsUnit3[16] },
            { en_verb: "Execute", tr_verb: "Uygulamak, Ä°cra Etmek", en_sentence: "The team will {Execute} the plan next week.", tr_sentence: "Ekip planÄ± gelecek hafta uygulayacak.", image_url: customImageUrlsUnit3[17] },
            { en_verb: "Integrate", tr_verb: "BÃ¼tÃ¼nleÅŸtirmek", en_sentence: "We need to {Integrate} the new system.", tr_sentence: "Yeni sistemi bÃ¼tÃ¼nleÅŸtirmemiz gerekiyor.", image_url: customImageUrlsUnit3[18] },
            { en_verb: "Resolve", tr_verb: "Ã‡Ã¶zmek", en_sentence: "The company must {Resolve} the conflict quickly.", tr_sentence: "Åžirket Ã§atÄ±ÅŸmayÄ± hÄ±zla Ã§Ã¶zmeli.", image_url: customImageUrlsUnit3[19] }
        ];

        const allWordsData = [...baseVerbs, ...academicWordsUnit1, ...unit2Words, ...unit3Words];
        
        // Kelime SayÄ±larÄ± Kontrol Edildi: Ãœnite 1: 5 + 20 = 25. Ãœnite 2: 20. Ãœnite 3: 20.
        const unitDatabase = {
            1: [...baseVerbs, ...academicWordsUnit1].map(item => [item.en_verb, item.tr_verb]),
            2: unit2Words.map(item => [item.en_verb, item.tr_verb]), 
            3: unit3Words.map(item => [item.en_verb, item.tr_verb]),
        };

        // DiÄŸer Ã¼niteleri doldur (toplam 20 Ã¼nite olacak ÅŸekilde)
        for (let i = 4; i <= 20; i++) {
            if (!unitDatabase[i]) {
                unitDatabase[i] = [["example", "Ã¶rnek"], ["test", "deneme"]];
            }
        }

        // ======================================================
        // 2. TEMEL UYGULAMA MANTIÄžI VE FONKSÄ°YONLAR
        // ======================================================
        
        function getWordFullData(word) {
            const result = allWordsData.find(item => item.en_verb.toLowerCase() === word.toLowerCase());
            if (result) return result;
            
            // EÄŸer full data bulunamazsa, sadece kelime ve anlamÄ±nÄ± iÃ§eren bir obje dÃ¶ndÃ¼rÃ¼r
            for (const unitId in unitDatabase) {
                const found = unitDatabase[unitId].find(pair => pair[0].toLowerCase() === word.toLowerCase());
                if (found) {
                    return { 
                        en_verb: found[0], 
                        tr_verb: found[1], 
                        en_sentence: `Example sentence for {${found[0]}}.`, 
                        tr_sentence: `Ã–rnek cÃ¼mle.`, 
                        image_url: "https://via.placeholder.com/400x300?text=Gorsel+Yok" 
                    };
                }
            }
            return null;
        }

        function getWordCardData(word, meaning) {
            const fullData = getWordFullData(word);
            let finalEn = fullData ? fullData.en_sentence : "";
            let finalTr = fullData ? fullData.tr_sentence : "";
            const imgUrl = fullData && fullData.image_url ? fullData.image_url : "https://via.placeholder.com/400x300?text=Gorsel+Yok";
            
            if (fullData) {
                // CÃ¼mledeki {kelime} kÄ±sÄ±mlarÄ±nÄ± renklendirmek iÃ§in
                const highlightRegex = new RegExp(`\\{${word}\\}`, 'i');
                if (!fullData.en_sentence.match(highlightRegex)) {
                    const wordRegex = new RegExp(`\\b${word}\\b`, 'i');
                    let processedEn = fullData.en_sentence.replace(wordRegex, `{${word}}`);
                    finalEn = processedEn;
                } else {
                    finalEn = fullData.en_sentence;
                }
            }
            return { word: word, meaning: meaning, image: imgUrl, sentenceEn: finalEn, sentenceTr: finalTr };
        }

        function speakWord(word) {            
            if ('speechSynthesis' in window) {                
                const utterance = new SpeechSynthesisUtterance(word);
                utterance.lang = 'en-US';
                window.speechSynthesis.speak(utterance);            
            }
        }

        const listScreen = document.getElementById('list-screen');
        const detailScreen = document.getElementById('detail-screen');        
        const cardScreen = document.getElementById('card-screen');
        const quizScreen = document.getElementById('quiz-screen');
        const resultScreen = document.getElementById('result-screen');

        function switchScreen(screen) {            
            listScreen.classList.remove('active'); listScreen.style.display = 'none';            
            detailScreen.classList.remove('active'); detailScreen.style.display = 'none';            
            cardScreen.classList.remove('active'); cardScreen.style.display = 'none';
            quizScreen.classList.remove('active'); quizScreen.style.display = 'none';
            resultScreen.classList.remove('active'); resultScreen.style.display = 'none';
            
            screen.style.display = 'block';            
            setTimeout(() => screen.classList.add('active'), 10);
        }
        
        function initUnitList() {            
            const container = document.getElementById('units-container');
            const totalUnits = 20;            
            const colors = ['bg-1', 'bg-2', 'bg-3', 'bg-4', 'bg-5'];
            for (let i = 1; i <= totalUnits; i++) {                
                const color = colors[(i - 1) % colors.length];
                const wordCount = unitDatabase[i] ? unitDatabase[i].length : 0;                                
                const card = document.createElement('div');                
                card.className = 'unit-card';                
                card.onclick = () => openUnit(i);
                card.innerHTML = `                    
                    <div class="circle ${color}">${i}</div>                    
                    <div class="info">               
                        <h3>Ãœnite ${i}</h3>                        
                        <p>${wordCount} kelime</p>                 
                    </div>                
                `;
                container.appendChild(card);            
            }        
        }
        
        // --- QUIZ MANTIÄžI VE DEÄžÄ°ÅžKENLERÄ° ---
        let currentQuizQuestions = [];
        let currentQuestionIndex = 0;
        let correctCount = 0;
        let currentUnitIdForQuiz = 0;

        function openUnit(unitId) {            
            document.getElementById('detail-unit-title').innerText = `Ãœnite ${unitId} Kelimeleri`;
            const listContainer = document.getElementById('unit-word-list');            
            const emptyMsg = document.getElementById('empty-message');            
            listContainer.innerHTML = '';
            
            const rawWords = unitDatabase[unitId];
            if (!rawWords || rawWords.length === 0) {                
                emptyMsg.style.display = 'block';
            } else {                
                emptyMsg.style.display = 'none';
                rawWords.forEach(pair => {                    
                    const word = pair[0];
                    const meaning = pair[1];
                    const fullData = getWordFullData(word); 
                    const listImageUrl = fullData && fullData.image_url ? fullData.image_url : "https://via.placeholder.com/50x50?text=DEMO";

                    const li = document.createElement('li');           
                    li.className = 'word-item';                                        
                    li.dataset.word = word;       
                    li.dataset.meaning = meaning;                                        
                    li.onclick = function() {                        
                        const w = this.dataset.word;
                        const m = this.dataset.meaning;
                        openCard(getWordCardData(w, m));                    
                    };                                        
                    
                    li.innerHTML = `                        
                        <div class="word-thumbnail">
                            <img src="${listImageUrl}" alt="${word}">
                        </div>
                        <div style="flex-grow:1">                            
                            <div style="font-weight:bold; color:#333; font-size:16px;">${word}</div>    
                            <div style="font-size:14px; color:#777;">${meaning}</div>                        
                        </div>                        
                        <span style="color:#ddd;">&#10095;</span>                    
                    `;
                    listContainer.appendChild(li);                
                });            
            }            

            // --- QUIZ BUTONU EKLEME KISMI (SABÄ°T) ---
            currentUnitIdForQuiz = unitId; 
            
            // Varsa eski butonu kaldÄ±r
            const oldBtn = document.querySelector('.fixed-quiz-btn-container');
            if(oldBtn) oldBtn.remove();
            
            // Butonu oluÅŸtur
            if (rawWords && rawWords.length > 0) {
                const btnContainer = document.createElement('div');
                btnContainer.className = 'fixed-quiz-btn-container';
                btnContainer.innerHTML = `
                    <button class="start-quiz-btn" onclick="startQuiz()">
                         QUIZ BAÅžLAT (${rawWords.length} Soru)
                    </button>
                `;
                document.getElementById('detail-screen').appendChild(btnContainer);
                listContainer.style.paddingBottom = "80px"; // Butonun altÄ±nda kalmasÄ±n
            }

            switchScreen(detailScreen);
        }

        function openCard(data) {            
            document.getElementById('card-word').innerText = data.word;
            document.getElementById('card-meaning').innerText = data.meaning;                        
            const formattedEn = data.sentenceEn.replace(/{(\w+)}/g, '<span class="highlight-word">$1</span>');
            document.getElementById('card-sentence-en').innerHTML = formattedEn;
            document.getElementById('card-sentence-tr').innerText = data.sentenceTr;                        
            const img = document.getElementById('card-image');            
            img.src = data.image;
            document.getElementById('card-speaker-icon').onclick = () => speakWord(data.word);
            switchScreen(cardScreen);        
        }
        
        function showListScreen() { switchScreen(listScreen); }        
        function closeCardScreen() { switchScreen(detailScreen); }

        // --- QUIZ FONKSÄ°YONLARI ---
        function startQuiz() {
            const rawWords = unitDatabase[currentUnitIdForQuiz];
            if (!rawWords || rawWords.length === 0) return;

            // Kelime sayÄ±sÄ± kadar soru (Sorular sabit)
            currentQuizQuestions = rawWords.map(item => ({
                word: item[0],
                correctMeaning: item[1]
            }));

            currentQuestionIndex = 0;
            correctCount = 0;
            
            // Toplam soru sayÄ±sÄ±nÄ± ayarla
            document.getElementById('q-total').innerText = currentQuizQuestions.length;
            
            switchScreen(quizScreen);
            showQuestion();
        }

        function showQuestion() {
            if (currentQuestionIndex >= currentQuizQuestions.length) {
                showResult();
                return;
            }

            const qData = currentQuizQuestions[currentQuestionIndex];
            
            // Ä°lerleme ve soru numarasÄ±nÄ± gÃ¼ncelle
            const progress = ((currentQuestionIndex) / currentQuizQuestions.length) * 100;
            document.getElementById('quiz-bar').style.width = `${progress}%`;
            document.getElementById('q-current').innerText = currentQuestionIndex + 1; // Hata buradaydÄ±
            
            document.getElementById('quiz-word-display').innerText = qData.word;
            
            // SeÃ§enekleri oluÅŸtur (1 DoÄŸru + 3 YanlÄ±ÅŸ)
            let options = [qData.correctMeaning];
            
            // YanlÄ±ÅŸ cevap havuzu (TÃ¼m veritabanÄ±ndan rastgele al)
            const allMeanings = [];
            for(let u in unitDatabase) {
                unitDatabase[u].forEach(w => allMeanings.push(w[1]));
            }
            
            while (options.length < 4) {
                const randomMeaning = allMeanings[Math.floor(Math.random() * allMeanings.length)];
                // AynÄ± cevap tekrar eklenmesin ve doÄŸru cevap olmasÄ±n
                if (!options.includes(randomMeaning) && randomMeaning !== qData.correctMeaning) {
                    options.push(randomMeaning);
                }
            }
            // SeÃ§enekleri karÄ±ÅŸtÄ±r
            options = options.sort(() => Math.random() - 0.5);

            const listEl = document.getElementById('quiz-options-list');
            listEl.innerHTML = '';
            
            options.forEach(opt => {
                const li = document.createElement('li');
                li.className = 'quiz-option';
                li.innerText = opt;
                li.onclick = () => checkAnswer(li, opt, qData.correctMeaning);
                listEl.appendChild(li);
            });
        }

        function checkAnswer(el, selected, correct) {
            // TÄ±klamalarÄ± kilitle
            const allOpts = document.querySelectorAll('.quiz-option');
            allOpts.forEach(o => o.style.pointerEvents = 'none');

            if (selected === correct) {
                el.classList.add('correct');
                correctCount++;
                const checkMark = document.createElement('span');
                checkMark.innerHTML = '&#10003;';
                checkMark.style.cssText = "position:absolute; right:20px; font-size:24px; font-weight:bold; color:white;";
                el.appendChild(checkMark);
            } else {
                el.classList.add('wrong');
                // DoÄŸruyu gÃ¶ster
                allOpts.forEach(o => {
                    if (o.innerText === correct) {
                         o.classList.add('correct');
                         // YanlÄ±ÅŸ seÃ§ildiÄŸinde doÄŸru cevabÄ± hafifÃ§e iÅŸaretle
                         o.style.backgroundColor = '#d4edda'; 
                         o.style.color = '#155724'; 
                    }
                });
            }

            // Sonraki soruya geÃ§
            setTimeout(() => {
                currentQuestionIndex++;
                showQuestion();
            }, 1000);
        }

        function showResult() {
            // Ä°lerleme Ã§ubuÄŸunu %100 yap
            document.getElementById('quiz-bar').style.width = '100%'; 

            document.getElementById('result-score-val').innerText = `${correctCount}/${currentQuizQuestions.length}`;
            switchScreen(resultScreen);
        }

        function restartQuiz() {
            startQuiz();
        }

        function closeQuiz() {
            // Quiz ekranÄ±ndan detay ekranÄ±na dÃ¶n
            switchScreen(detailScreen);
        }
        
        // UygulamayÄ± BaÅŸlat        
        initUnitList();
    </script> 
</body> 
</html>
